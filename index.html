<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Arduino Commander</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <style>
    #command-input {
      width: 150px;
      height: 150px;
      transform: rotate(270deg);
      border: 5px solid red;
  }
  </style>
  <script>
    function sendCommand() {
      var value = parseInt(document.getElementById("command-input").value);
      var command = {};

      if(value < 0) {
        command.type = 2;
        command.value = Math.abs(value);
      } else {
        command.type = 1;
        command.value = value;
      }

      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if (xhttp.readyState == 4 && xhttp.status == 200) {
          document.getElementById("status").innerHTML = xhttp.responseText;
        }
      };
      xhttp.open("POST", "set-command", true);
      xhttp.setRequestHeader("Content-type", "application/json");
      xhttp.send(JSON.stringify(command));
      console.log("command: " + JSON.stringify(command))
      document.getElementById("command-value").innerHTML = value;
      document.getElementById("command-result").innerHTML = JSON.stringify(command);
    }
  </script>
</head>
<body>
  <div class="container">
    <div class="row">
      <div class="col-md-6 col-sm-6 col-md-offset-3 col-sm-offset-3">
        <p>Write command: </p>
        <input name="command-input" id="command-input" type="range" min="-16" max="16" step="1" oninput="sendCommand()">
        <button onclick="document.getElementById('command-input').value = 50; sendCommand();">Stop</button>
        <hr>
        <p>Value: <span id="command-value"></span></p>
        <p>Command: <span id="command-result"></span></p>
        <p>Status: <span id="status"></span></p>
        <div>
        </div>
  </div>
</body>
</html>
