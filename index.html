<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Arduino Commander</title>
  <script>
    function sendCommand() {
      var command = document.getElementById("command-input").value;
      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if (xhttp.readyState == 4 && xhttp.status == 200) {
          document.getElementById("status").innerHTML = xhttp.responseText;
        }
      };
      xhttp.open("POST", "set-command", true);
      xhttp.setRequestHeader("Content-type", "application/json");
      xhttp.send(JSON.stringify({command: command}));
      console.log("command: " + command);
    }
    function getCommand() {
      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if (xhttp.readyState == 4 && xhttp.status == 200) {
          document.getElementById("command-input").value = "";
          document.getElementById("command-result").innerHTML = xhttp.responseText;
        }
      };
      xhttp.open("GET", "get-command", true);
      xhttp.send();
    }
  </script>
</head>
<body>
  <p>Write command: <input type="text" name="command-input" id="command-input"></p>
  <button onclick="sendCommand()">Send command</button>
  <p>Status: <span id="status"></span></p>
  <hr>
  <button onclick="getCommand()">Get command</button>
  <p>Command: <span id="command-result"></span></p>
</body>
</html>
